/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.3.0.2.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2020 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,t){"use strict";function i(f){var n=new $.C.JOC,t=n.$jnI;t.$ROI=new $.C.GPC.$t(0,!1),t.$EwI=60,t.$xvI=20;var i=n.$pnI;switch(f.$f7){case-1:i.$WXI=0;break;case 0:i.$WXI=.5;break;case 1:i.$WXI=1}return n}function r($,f,n){for(var t=0,i=0,r=f.$WAI();r.$LU;r.$uZ()){var l=r.$XU;1===n.$Fa(l)?l.$f7>0&&i++:t+=l.$f6}return i<=1&&2===t}function l(f,n,t){var i=n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY);f.$f16=n.$cDI(),f.$f17=n.$cDI(),f.$f3=n.$cDI(),f.$f4=n.$cDI(),f.$f12 instanceof $.C.JOC&&0!==f.$f19&&(f.$f=f.$f12.$ZbJ(n)),function(f,n,t){f.$f5=$.DF.$m13(n.$pD),f.$f1=new $.FE;var i=new $.FE;f.$f11=new $.C.EXA.$s,f.$f2=n.$dDI(),f.$f15=n.$dDI(),f.$f6=n.$dDI(),f.$f9=n.$dDI(),f.$f8=n.$dDI();for(var r=n.$fDI();r.$LU;r.$uZ()){var l=new $.C.EXA.$s,u=r.$XU;f.$f2.$hf(u,"n"+u.$oq),1===n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(u)?a(f,u,l):e(f,u,l);var _=new $.FE;_.$m(l),o(f,l,_);for(var s=0;s<_.$lN;s++)if((l=_.$oN(s)).$f1>1){for(var h=new $.FH.$c1("GN"),E=0;E<l.$f1;E++)h.$m2($.LF.$m8(l.$oN(E).$oq)),h.$m2("/");i.$m(h.toString()),f.$f1.$m(l)}}for(var T=0;T<f.$f1.$lN;T++){var D=new $.C.WVA(0,0,0,0),C=n.$SCI(),l=f.$f1.$oN(T);f.$f11.$m5(C);for(var F=0;F<l.$f1;F++){var I=l.$oN(F);f.$f15.$hf(I,i.$oN(T)),f.$f9.$hf(I,t),f.$f8.$hf(I,D)}f.$f8.$hf(C,D),f.$f6.$LP(C,!0),f.$f2.$hf(C,i.$oN(T))}n.$tfJ($.T.YXA.NODE_ID_DP_KEY,f.$f2),n.$tfJ($.T.YXA.PARENT_NODE_ID_DP_KEY,f.$f15),n.$tfJ($.T.YXA.GROUP_DP_KEY,f.$f6),n.$tfJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY,f.$f8),n.$tfJ($.T.ZJC.LAYOUT_DP_KEY,f.$f9)}(f,n,t);for(var r=n.$fPJ($.T.GJC.NODE_ID_DP_KEY),l=n.$fDI();l.$LU;l.$uZ()){var u=l.$XU;if(1===n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(u)){for(var _=null,s=u.$fRJ(null);s.$LU;s.$uZ()){var h=s.$WU.$f3;if(null===_&&(_=h),n.$xgJ(s.$WU,new $.C.FWA.$t(0,n.$m38(s.$WU.$f2).$uW/2)),n.$zgJ(s.$WU,new $.C.FWA.$t(0,-n.$m38(s.$WU.$f3).$uW/2)),f.$f3.$hf(s.$WU,$.T.FLC.$t(2,!0)),f.$f4.$hf(s.$WU,$.T.FLC.$t(1,!0)),null!==f.$f&&_!==h){var E=null===r?_:r.$Fa(_),T=null===r?h:r.$Fa(h);(4===f.$f19||3===f.$f19)!==(2===i.$Fa(h))?f.$f.$ai(E,T):f.$f.$di(E,T)}}for(var D=new $.FE,C="CG"+u.$oq,F=u.$fRJ(null);F.$LU;F.$uZ()){var I=F.$WU;f.$f16.$hf(I,C);var N=f.$f15.$Fa(I.$f3);null!==N&&-1!==D.indexOf(N)||(f.$f17.$hf(I,C),null!==N&&D.$m(N))}}}n.$tfJ($.T.HLC.SOURCE_GROUP_ID_DP_KEY,f.$f16),n.$tfJ($.T.HLC.TARGET_GROUP_ID_DP_KEY,f.$f17),n.$tfJ($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY,f.$f3),n.$tfJ($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY,f.$f4)}function a(f,n,t){if(1!==n.$f2.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(n))throw $.IG.$m30(N[4]);if(!f.$f5[n.$oq]){t.$m5(n),f.$f5[n.$oq]=!0;for(var i=0,r=n.$FFI();r.$LU;r.$uZ())if(e(f,r.$XU,t),++i>2)throw $.IG.$m30(N[5])}}function e(f,n,t){if(1===n.$f2.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(n))throw $.IG.$m30(N[6]);if(!f.$f5[n.$oq]){t.$m5(n),f.$f5[n.$oq]=!0;for(var i=n.$vFI();i.$LU;i.$uZ())a(f,i.$XU,t)}}function o(f,n,t){var i=-1,r=-1;for(i=0;i<n.$f1;i++){var l=n.$oN(i);if(1===l.$f2.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(l)){for(var a=l.$vFI();a.$LU&&!((r=n.indexOf(a.$XU))>-1);a.$uZ());if(r>-1)break}}if(-1!==r){var e=new $.C.EXA.$s,s=n.$oN(i),h=n.$oN(r),E=new $.C.EXA.$s;n.$JT(h),e.$m5(h);for(a=h.$vFI();a.$LU;a.$uZ()){var T=a.$XU;n.$JT(T),e.$m5(T);for(var D=T.$FFI();D.$LU;D.$uZ()){var C=D.$XU;C!==h&&(u(f,T,C,s,h)?_(f,T,n,e):E.$m5(T))}}for(a=E.$WAI();a.$LU;a.$uZ())for(var F=a.$XU.$iPJ(null);F.$LU;F.$uZ())if(F.$WU.$f2!==h){var I=h.$f2;I.$xgJ(F.$WU,new $.C.FWA.$t(0,0)),I.$zgJ(F.$WU,new $.C.FWA.$t(0,0)),f.$f3.$hf(F.$WU,$.T.FLC.$t(0,!0)),f.$f4.$hf(F.$WU,$.T.FLC.$t(0,!0))}o(f,n,t),o(f,e,t),t.$m(e)}}function u(f,n,t,i,r){return function f(n,t,i,r,l,a){if(!$.KE.$m9(a,new $.T.DNC.T(t,i)))return!0;for(var e=i.$vFI();e.$LU;e.$uZ()){var o=e.$XU;if(o!==t){if(o===r)return!1;for(var u=o.$FFI();u.$LU;u.$uZ()){var _=u.$XU;if(_!==i){if(_===l)return!0;if(!f(n,o,_,r,l,a))return!1}}}}return!0}(f,n,t,i,r,new $.ME)}function _($,f,n,t){for(var i=f.$FFI();i.$LU;i.$uZ()){var r=i.$XU;if(!(n.indexOf(r)<0)){n.$JT(r),t.$m5(r);for(var l=r.$vFI();l.$LU;l.$uZ()){var a=l.$XU;n.indexOf(a)>-1&&(n.$JT(a),t.$m5(a),_($,a,n,t))}}}}function s($,f,n,t){for(var i=1,r=f.$FFI();r.$LU;r.$uZ()){var l=r.$XU;if(l!==n&&-1===t.indexOf(l)){t.$m5(l);for(var a=l.$vFI();a.$LU;a.$uZ()){var e=a.$XU;e!==f&&(i+=s($,e,l,t))}}}return i}var h=f.lang.ClassDefinition,E=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),T=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),D=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),C=(f.lang.String,f.lang.decorators.Type),F=f.lang.decorators.OptionArgs,I=f.lang.decorators.SetterArg;f.lang.addMappings("yFiles-for-HTML-Complete-2.3.0.2-Evaluation (Build ab5b01168e73-08/12/2020)",{get _$_fpd(){return["alignment","$wG",C("yfiles._R.C.FNC",5)]},_$_gpd:["topLayout","$xG"],_$_kff:["partnerlessBelow","$QdI"],_$_xyf:["offsetForFamilyNodes","$ZnI"],_$_jhg:["familyNodesAlwaysBelow","$rrI"],get _$_hrg(){return["familyMembersSortingPolicy","$uxI",C("yfiles._R.C.GNC",5)]},_$_isg:["spacingBetweenFamilyMembers","$XxI"],get _$_pin(){return["FamilyTreeLayout","DNC",F(I("topLayout"),I("spacingBetweenFamilyMembers"),I("offsetForFamilyNodes"),I("partnerlessBelow"),I("familyNodesAlwaysBelow"),I("alignment","yfiles._R.C.FNC"),I("parallelEdgeRouterEnabled"),I("selfLoopRouterEnabled"),I("familyMembersSortingPolicy","yfiles._R.C.GNC"),I("labeling"),I("selfLoopRouter"),I("parallelEdgeRouter"),I("componentLayout"),I("subgraphLayout"),I("hideGroupsStage"),I("orientationLayout"),I("orientationLayoutEnabled"),I("layoutOrientation","yfiles._R.C.RHC"),I("labelingEnabled"),I("hideGroupsStageEnabled"),I("componentLayoutEnabled"),I("subgraphLayoutEnabled"))]},_$_qin:["FamilyType","ENC"],_$_rin:["VerticalNodeAlignment","FNC"],_$_sin:["FamilyMembersSortingPolicy","GNC"],_$$_bta:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var N=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];T("_$$_bta",function(n){n._$_pin=new h(function(){return{$extends:$.C.CKC,constructor:function(){$.C.CKC.call(this),this.$f=null,this.$JsI=!1,this.$EgI.$ZJ=12,this.$f12=i(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f20:null,$f21:null,$f12:null,$f22:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_gpd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?i(this):$}},"$m1!":function(){if(!this.$f22||0!==this.$f19)return!1;var f=this.$xG;return $.C.HJC.isInstance(f)&&(f=f.$oW),f instanceof $.C.JOC},_$_isg:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.IG.$m2();this.$f13=f}},_$_xyf:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.IG.$m2();this.$f14=f}},_$_kff:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_jhg:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_fpd:{get:function(){return this.$f7},set:function(f){var n=0;switch(0|f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.IG.$m18(N[0])}null!==this.$f12&&this.$f12 instanceof $.C.JOC&&(this.$f12.$pnI.$WXI=n),this.$f7=0|f}},$MwI:{set:function($){this.$f48=$}},$EqI:{set:function($){this.$f31=$}},$f19:0,$f:null,_$_hrg:{get:function(){return this.$f19},set:function(f){switch(0|f){case 0:case 1:case 2:case 3:case 4:this.$f19=0|f;break;default:throw $.IG.$m2()}}},$ZRJ:function(f){if(null===f.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY))throw $.IG.$m28(N[1]+$.T.DNC.FAMILY_TYPE_DP_KEY+N[2]);var n=new $.C.VXA(f),t=f.$fPJ($.T.YXA.GROUP_DP_KEY),i=f.$fPJ($.T.YXA.PARENT_NODE_ID_DP_KEY),r=f.$fPJ($.T.YXA.NODE_ID_DP_KEY),a=f.$fPJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY),e=new $.C.VXA(f),o=null,u=$.T.WXA.$E(),_=$.T.WXA.$E(),s=$.T.WXA.$E(),h=$.T.WXA.$E(),E=$.T.WXA.$C(),T=null;if(function(f,n){f.$f20=$.T.WXA.$E();var t=n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==t)for(var i=n.$fDI();i.$LU;i.$uZ()){var r=i.$XU;1===t.$Fa(r)&&f.$f20.$nf(r,r.$f7)}}(this,f),function(f,n){f.$f21=$.T.WXA.$E();var t=n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==t)for(var i=n.$fDI();i.$LU;i.$uZ()){var r=i.$XU;1===t.$Fa(r)&&f.$f21.$nf(r,r.$f6)}}(this,f),null!==t){o=f.$cDI();for(var C=!1,F=f.$eDI();F.$LU;F.$uZ()){var I=F.$WU;t.$DP(I.$f2)!==t.$DP(I.$f3)?(o.$LP(I,!0),e.$tHI(I),C=!0):o.$LP(I,!1)}C||(f.$cOJ(o),o=null);for(var P=f.$fDI();P.$LU;P.$uZ()){var v=P.$XU;t.$DP(v)&&(E.$hf(r.$Fa(v),v),n.$vHI(v),u.$LP(v,!0),_.$hf(v,i.$Fa(v)),s.$hf(v,r.$Fa(v)),h.$hf(v,a.$Fa(v)))}null!==t&&f.$FUJ($.T.YXA.GROUP_DP_KEY),null!==i&&f.$FUJ($.T.YXA.PARENT_NODE_ID_DP_KEY),null!==r&&f.$FUJ($.T.YXA.NODE_ID_DP_KEY),null!==a&&f.$FUJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY)}var A=new $.T.DNC.T1(this);if(l(this,f,A),null!==t){var U=new $.C.ZXA(f);for(P=f.$fDI();P.$LU;P.$uZ()){v=P.$XU;if(U.$PMJ(v)){var Y=new $.FE;u.$LP(v,!1);for(var c=U.$NMJ(v).$m3();c.$p;){var m=c.$m(),J=i.$Fa(m);if(null!==J){for(var L=0;L<Y.$lN;L++)if(J===i.$Fa(Y.$oN(L))){J=null;break}null!==J&&Y.$m(m)}}if(0===Y.$lN){m=U.$NMJ(v).$xCI();_.$hf(v,i.$Fa(m)),s.$hf(v,r.$Fa(m))}else if(_.$hf(v,i.$Fa(Y.$oN(0))),s.$hf(v,r.$Fa(Y.$oN(0))),Y.$lN>1){for(var X=0;X<Y.$lN;X++)for(var O=E.$Fa(i.$Fa(Y.$oN(X))),w=0;w<Y.$lN;w++){var d=E.$Fa(i.$Fa(Y.$oN(w)));D.equals(r.$Fa(d),i.$Fa(O))&&Y.$m2(w)}if(_.$hf(v,i.$Fa(Y.$oN(0))),s.$hf(v,r.$Fa(Y.$oN(0))),1===Y.$lN);else{null===T&&(T=new $.C.EXA.$s);var g=f.$SCI();T.$m5(g),u.$LP(g,!0),s.$hf(g,g);for(L=1;L<Y.$lN;L++)for(var W=Y.$oN(0),K=!1;null!==W;){for(var R=E.$Fa(i.$Fa(W)),y=Y.$oN(L);null!==y;){var b=E.$Fa(i.$Fa(y));if(b===R){if(Y.$oN(0)!==W)for(var Z=0;Z<L;Z++)Y.$rN(Z,W);Y.$rN(L,y),K=!0;break}y=b}if(K)break;for(Z=0;Z<L;Z++)Y.$rN(Z,W);W=R}for(L=0;L<Y.$lN;L++)_.$hf(Y.$oN(L),g);_.$hf(g,i.$Fa(Y.$oN(0))),n.$vHI(g)}}}else u.$LP(v,!1),_.$hf(v,i.$Fa(v)),s.$hf(v,r.$Fa(v))}U.$eBI()}var M=new $.T.DNC.T2(this,this.$xG),p=new $.T.DNC.T4(n,t,u,_,s,h,M),S=new $.C.ZJC;S.$oW=p;var G=new $.C.UIC(S,null);G.$QXI=this.$m1();try{new $.T.DNC.T3(this,G,A,M).$Cb(f)}finally{!function(f,n){null!==f.$f16&&(n.$FUJ($.T.HLC.SOURCE_GROUP_ID_DP_KEY),n.$cOJ(f.$f16),f.$f16=null),null!==f.$f17&&(n.$FUJ($.T.HLC.TARGET_GROUP_ID_DP_KEY),n.$cOJ(f.$f17),f.$f17=null),null!==f.$f3&&(n.$FUJ($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY),n.$cOJ(f.$f3),f.$f3=null),null!==f.$f4&&(n.$FUJ($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY),n.$cOJ(f.$f4),f.$f4=null),null!==f.$f8&&(n.$FUJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY),n.$dOJ(f.$f8),f.$f8=null),null!==f.$f9&&(n.$FUJ($.T.ZJC.LAYOUT_DP_KEY),n.$dOJ(f.$f9),f.$f9=null),null!==f.$f2&&(n.$FUJ($.T.YXA.NODE_ID_DP_KEY),n.$dOJ(f.$f2),f.$f2=null),null!==f.$f15&&(n.$FUJ($.T.YXA.PARENT_NODE_ID_DP_KEY),n.$dOJ(f.$f15),f.$f15=null),null!==f.$f6&&(n.$FUJ($.T.YXA.GROUP_DP_KEY),n.$dOJ(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$SZ(),f.$f=null)}(this,f),null!==t&&f.$tfJ($.T.YXA.GROUP_DP_KEY,t),null!==i&&f.$tfJ($.T.YXA.PARENT_NODE_ID_DP_KEY,i),null!==r&&f.$tfJ($.T.YXA.NODE_ID_DP_KEY,r),null!==a&&f.$tfJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY,a)}if(n.$BCI(),null!==T){for(L=0;L<T.$f1;L++)f.$TKI(T.$oN(L));T=null}if(e.$BCI(),null!==this.$f1)for(L=0;L<this.$f1.$lN;L++)f.$TKI(this.$f11.$oN(L));if(null!==o){f.$tfJ($.T.YSC.AFFECTED_EDGES_DP_KEY,o);var x=new $.C.DTC;x.$XjI=$.T.YSC.AFFECTED_EDGES_DP_KEY;try{x.$Cb(f)}finally{f.$FUJ($.T.YSC.AFFECTED_EDGES_DP_KEY),f.$cOJ(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new h(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n){$.C.AKC.call(this,n),this.$f=f,this.$f1=$.T.WXA.$D()},$f1:null,"$m!":function($){return this.$f1.$Fa($)},"$Cb!":function($){if(this.$oW.$Cb($),this.$f.$m1())for(var f=$.$fDI();f.$LU;f.$uZ())for(var n=f.$XU.$iPJ(null);n.$LU;n.$uZ()){var t=n.$WU;this.$f1.$hf(t,$.$zUJ(t))}},$f:null}}),T3:new h(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n,t,i){$.C.AKC.call(this,n),this.$f=f,this.$f2=t,this.$f1=i},$f2:null,$f1:null,"$Cb!":function(f){if(this.$f.$m1()){var n=new $.C.ZXA(f),t=$.T.WXA.$E();!function(f,n,t,i){for(var l=t.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY),a=f.$f.$f11.$WAI();a.$LU;a.$uZ()){var e=a.$XU,o=n.$NMJ(e);if(r(0,o,l)){i.$LP(e,!0);for(var u=o.$WAI();u.$LU;u.$uZ()){var _=u.$XU;if(1!==l.$Fa(_))for(var s=_.$iPJ(null);s.$LU;s.$uZ())f.$f.$f4.$hf(s.$WU,null)}}}}(this,n,f,t),this.$oW.$Cb(f),function(f,n,t,i,r){for(var l=n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY),a=f.$f.$f11.$WAI();a.$LU;a.$uZ()){var e=a.$XU;if(i.$DP(e)){for(var o=t.$NMJ(e),u=null,_=null,s=o.$WAI();s.$LU;s.$uZ()){var h=s.$XU;1!==l.$Fa(h)&&h.$f6>0&&(null===u?u=h:_=h)}if(null!==u&&null!==_){var E=n.$tLI(u),T=n.$tLI(_),D=r.$m(u.$f11).$f,C=r.$m(_.$f11).$f;if(E>T&&D<C||E<T&&D>C){var F=n.$YPJ(e);for(s=o.$WAI();s.$LU;s.$uZ()){h=s.$XU;var I=F.$f+F.$f3-(n.$tLI(h)-F.$f);n.$dhJ(h,I,n.$uLI(h))}}}}}}(this,f,n,t,this.$f1),function(f,n,t,i){for(var r=n.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY),l=f.$f.$f11.$WAI();l.$LU;l.$uZ()){var a=l.$XU;if(i.$DP(a))for(var e=t.$NMJ(a).$WAI();e.$LU;e.$uZ()){var o=e.$XU;if(1!==r.$Fa(o))for(var u=o.$iPJ(null);u.$LU;u.$uZ()){var _=u.$WU;n.$zgJ(_,new $.C.FWA.$t(0,-n.$m38(o).$uW/2)),f.$f.$f4.$hf(_,$.T.FLC.$t(1,!0))}}}}(this,f,n,t),f.$tfJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f.$f8);var i=this.$f1.$oW;i.$OJ=0,this.$f2.$f1=!0,this.$oW.$Cb(f),i.$OJ=1,this.$f2.$f1=!1,f.$FUJ($.T.JOC.INCREMENTAL_HINTS_DP_KEY),n.$eBI()}else this.$oW.$Cb(f)},$f:null}}),T4:new h(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(f,n,t,i,r,l,a){$.C.AKC.call(this,a),this.$f=f,this.$f1=n,this.$f2=t,this.$f5=i,this.$f4=r,this.$f3=l},"$Cb!":function(f){var n=new $.C.EXA.$t(this.$f.$AFI());this.$f.$BCI(),null!==this.$f1&&(f.$tfJ($.T.YXA.GROUP_DP_KEY,this.$f2),f.$tfJ($.T.YXA.PARENT_NODE_ID_DP_KEY,this.$f5),f.$tfJ($.T.YXA.NODE_ID_DP_KEY,this.$f4),f.$tfJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f3)),this.$UxJ(f),this.$f.$wHI(n),f.$FUJ($.T.YXA.GROUP_DP_KEY),f.$FUJ($.T.YXA.PARENT_NODE_ID_DP_KEY),f.$FUJ($.T.YXA.NODE_ID_DP_KEY),f.$FUJ($.T.YXA.GROUP_NODE_INSETS_DP_KEY)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new h(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new h(function(){return{$final:!0,$with:[$.C.FJC],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.WXA.$E(),this.$f2=new $.T.DNC.T1.T(this,this.$f3,this.$f.$f20)},$f1:!1,$f2:null,$f3:null,"$Cb!":function(f){if(1!==f.$pD){if(2===f.$pD&&this.$f.$f10&&this.$f.$f21.$La(f.$oD)<2&&this.$f.$f21.$La(f.$hA)<2){for(var n=null,t=null,i=f.$fDI();i.$LU;i.$uZ()){var r=i.$XU;1!==f.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(r)?n=r:t=r}if(null!==n&&null!==t){var l=f.$m38(n),a=f.$m38(t);l.$th(-l.$YV/2,0),a.$th(-a.$YV/2,l.$uW+this.$f.$f14);for(var e=t.$iPJ(null);e.$LU;e.$uZ()){var o=e.$WU;($$=f.$m37(o)).$gZ(),$$.$HX=new $.C.FWA.$t(0,0),$$.$IX=new $.C.FWA.$t(0,0)}var u=this.$f.$f8.$Fa(n),_=new $.C.WVA(u.top,u.left,-this.$f.$f14-f.$m38(t).$uW,u.right);return void this.$f.$f8.$hf(n,_)}}var h=new $.C.EXA.$s;if(this.$f1)h.$THI(f.$fDI()),h.$xHI(new $.T.DNC.T1.T1(this,f));else{var E=new $.C.EXA.$s,T=new $.C.EXA.$s;for(i=f.$fDI();i.$LU;i.$uZ()){r=i.$XU;1!==f.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(r)?E.$m5(r):T.$m5(r)}for(var D=null,C=0,F=0;F<E.$f1;F++){(V=E.$oN(F)).$vFI().$VU>C&&(C=V.$vFI().$VU,D=V)}E.$JT(D),h.$m5(D),function f(n,t,i,r,l){for(var a=new $.C.EXA.$s,e=l.$vFI();e.$LU;e.$uZ()){var o=e.$XU;if(i.$JT(o)){var u=s(n,o,l,new $.C.EXA.$u(l));n.$f3.$nf(o,u),a.$m5(o)}}a.$xHI(n.$f2);var _=l.$f2.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY),h=!1;if(1===a.$f1&&r.indexOf(l)===r.$f1-1&&(h=!0),2===n.$f.$f19||4===n.$f.$f19)for(var E=0;E<a.$f1;E++)4===n.$f.$f19===(2===_.$Fa(l))?r.$m5(a.$oN(E)):r.$NT(0,a.$oN(E));else if(0!==n.$f.$f19&&1===r.$f1&&1===a.$f1)3===n.$f.$f19===(2===_.$Fa(l))?r.$m5(a.$oN(0)):r.$NT(0,a.$oN(0));else{var T=r.indexOf(l),D=r.indexOf(l)+1;for(E=0;E<a.$f1;E++)E%2!==0||h?r.$NT(D,a.$oN(E)):r.$NT(T,a.$oN(E)),D++}var C=new $.C.EXA.$s;for(E=0;E<a.$f1;E++){for(var F=!1,I=null,N=(o=a.$oN(E)).$FFI();N.$LU;N.$uZ())if((I=N.$XU)!==l){F=!0;break}if(t.$JT(I)){C.$m5(I);var P=r.indexOf(o);r.indexOf(l)>P?r.$NT(r.indexOf(o),I):r.$NT(r.indexOf(o)+1,I)}else if(F){var v=0;for(r.$JT(o),N=o.$FFI();N.$LU;N.$uZ())v=Math.max(r.indexOf(N.$XU),v);r.$NT(v,o)}}a=null;for(E=0;E<C.$f1;E++)f(n,t,i,r,C.$oN(E))}(this,E,T,h,D)}var I=new $.C.EXA.$s,N=new $.C.EXA.$s,P=new $.FE,v=0,A=0,U=Number.MAX_VALUE;for(F=0;F<h.$f1;F++){r=h.$oN(F);var Y=f.$m38(r);1===f.$fPJ($.T.DNC.FAMILY_TYPE_DP_KEY).$Fa(r)?(I.$m5(r),P.$m(F),Y.$th(v+Math.max((this.$f.$f13-Y.$YV)/2,Y.$YV/4),-Y.$uW/2),v=v+Math.max(1.5*Y.$YV,this.$f.$f13)|0):(N.$m5(r),U=Math.min(Y.$uW,U),A=Math.max(Y.$uW,A),Y.$th(v,-Y.$uW/2),v=v+Y.$YV|0)}if(0!==this.$f.$f7)for(F=0;F<N.$f1;F++){Y=f.$m38(N.$oN(F));1===this.$f.$f7?Y.$th(Y.$JU,-(Y.$uW-U/2)):Y.$th(Y.$JU,-U/2)}var c=$.DF.$m10(h.$f1),m=-2;for(F=0;F<I.$f1;F++){var J=I.$oN(F),L=!1,X=$.VE.$m8(P.$oN(F));if(this.$f.$f18||m===X-1&&0===c[m])L=!0;else for(var O=J.$FFI();O.$LU;O.$uZ()){var w=O.$XU,d=h.indexOf(w)-X;if(Math.abs(d)>2){L=!0;break}}if(L)c[X]=1;else{var g=new $.C.FWA.$t(0,0);for(e=J.$iPJ(null);e.$LU;e.$uZ()){o=e.$WU;if(($$=f.$m37(o)).$gZ(),0===this.$f.$f7)$$.$HX=g;else{Y=f.$m38(o.$f2);f.$wgJ(o,new $.C.FWA.$t(Y.$JU+Y.$YV/2,0))}$$.$IX=g}I.$m8(F),P.$m2(F),F--}m=X}var W,K=A/2;1===this.$f.$f7?K=U/2:-1===this.$f.$f7&&(K=A-U/2),W=K;for(F=0;F<I.$f1;F++){J=I.$oN(F);for(var R=$.VE.$m8(P.$oN(F)),y=0,b=J.$FFI();b.$LU;b.$uZ()){for(var Z=h.indexOf(b.$XU),M=Math.min(R,Z),p=Math.max(R,Z),S=0,G=M;G<=p;G++)S+=c[G];y=Math.max(S,y)}Y=f.$m38(J);var x=K+this.$f.$f14+(Y.$uW+this.$f.$f14)*(y-1);Y.$th(Y.$JU,x),W=Math.max(W,x+Y.$uW)}for(var H=0;H<N.$f1;H++){var V=N.$oN(H),k=h.indexOf(V),B=0,q=new $.C.IVA.$s;for(e=V.$fRJ(null);e.$LU;e.$uZ()){o=e.$WU;c[h.indexOf(o.$f3)]>0&&(q.$m5(o),B++)}if(B>0){var j=f.$m38(V).$YV/(B+1),Q=$.DF.$m10(q.$f1),z=$.DF.$m10(q.$f1);for(F=0;F<q.$f1;F++){Q[F]=h.indexOf(q.$oN(F).$f3)-k,Q[F]>0&&(Q[F]-=2*h.$f1),z[F]=j;for(G=0;G<F;G++)Q[F]>Q[G]?z[G]+=j:z[F]+=j}for(F=0;F<q.$f1;F++){var $$;o=q.$oN(F);($$=f.$m37(o)).$gZ(),$$.$IX=new $.C.FWA.$t(0,0);var f$=z[F],n$=f.$m38(o.$f3),t$=n$.$KU+n$.$uW/2,i$=f.$m38(V);$$.$HX=new $.C.FWA.$t(f$-i$.$YV/2,0),$$.$Jg(i$.$JU+f$,t$)}}}var r$=(u=this.$f.$f8.$Fa(N.$oN(0))).top,l$=u.bottom;null!==u&&0===this.$f.$f7?r$=W-K:null!==u&&1===this.$f.$f7&&(l$=K-W),this.$f.$f8.$hf(N.$oN(0),new $.C.WVA(r$,u.left,l$,u.right))}},$f:null,$static:{T:new h(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$OT!":function(f,n){var t=$.T.QXA.$m(this.$f.$La(f),this.$f.$La(n));return 0!==t?t:$.T.QXA.$m(this.$f2.$La(f),this.$f2.$La(n))},$f1:null}}),T1:new h(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$OT!":function(f,n){return $.T.QXA.$A(this.$f.$tLI(f),this.$f.$tLI(n))},$f1:null}})}}}),$clinit:function(){$.T.DNC.FAMILY_TYPE_DP_KEY=new $.C.GVA($.C.ENC.$class,$.C.DNC.$class,N[3])}}}})}),T("_$$_bta",function($){$._$_qin=new E(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),T("_$$_bta",function($){$._$_rin=new E(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})}),T("_$$_bta",function($){$._$_sin=new E(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;
