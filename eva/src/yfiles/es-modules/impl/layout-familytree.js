/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.3.0.3.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2020 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,n,f,i){"use strict";function t(n){var f=new $.C.JOC,i=f.$RBa;i.$zca=new $.C.GPC.$b(0,!1),i.$mKa=60,i.$fJa=20;var t=f.$XBa;switch(n.$f7){case-1:t.$Ela=0;break;case 0:t.$Ela=.5;break;case 1:t.$Ela=1}return f}function a($,n,f){for(var i=0,t=0,a=n.$EOa();a.$ti;a.$cn()){var r=a.$Fi;1===f.$no(r)?r.$f7>0&&t++:i+=r.$f6}return t<=1&&2===i}function r(n,f,i){var t=f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY);n.$f16=f.$KRa(),n.$f17=f.$KRa(),n.$f3=f.$KRa(),n.$f4=f.$KRa(),n.$f12 instanceof $.C.JOC&&0!==n.$f20&&(n.$f=n.$f12.$Hpb(f)),function(n,f,i){n.$f5=$.DF.$m13(f.$XR),n.$f1=new $.FE;var t=new $.FE;n.$f11=new $.C.EXA.$a,n.$f2=f.$LRa(),n.$f15=f.$LRa(),n.$f6=f.$LRa(),n.$f9=f.$LRa(),n.$f8=f.$LRa(),n.$f19=new $.ME;for(var a=f.$NRa();a.$ti;a.$cn()){var r=new $.C.EXA.$a,_=a.$Fi;n.$f2.$Pt(_,"n"+_.$WE),1===f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(_)?l(n,_,r):e(n,_,r);var u=new $.FE;u.$m(r),o(n,r,u);for(var s=0;s<u.$Tb;s++)if((r=u.$Wb(s)).$f1>1){for(var b=new $.FH.$c1("GN"),E=0;E<r.$f1;E++)b.$m2($.LF.$m8(r.$Wb(E).$WE)),b.$m2("/");t.$m(b.toString()),n.$f1.$m(r)}}for(var c=0;c<n.$f1.$Tb;c++){var T=new $.C.WVA(0,0,0,0),h=f.$AQa(),r=n.$f1.$Wb(c);n.$f11.$m5(h);for(var v=0;v<r.$f1;v++){var C=r.$Wb(v);n.$f15.$Pt(C,t.$Wb(c)),n.$f9.$Pt(C,i),n.$f8.$Pt(C,T)}n.$f8.$Pt(h,T),n.$f6.$td(h,!0),n.$f2.$Pt(h,t.$Wb(c))}f.$btb($.T.YXA.NODE_ID_DP_KEY,n.$f2),f.$btb($.T.YXA.PARENT_NODE_ID_DP_KEY,n.$f15),f.$btb($.T.YXA.GROUP_DP_KEY,n.$f6),f.$btb($.T.YXA.GROUP_NODE_INSETS_DP_KEY,n.$f8),f.$btb($.T.ZJC.LAYOUT_DP_KEY,n.$f9)}(n,f,i);for(var a=f.$Ndb($.T.GJC.NODE_ID_DP_KEY),r=f.$NRa();r.$ti;r.$cn()){var _=r.$Fi;if(1===f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(_)){for(var u=null,s=_.$Nfb(null);s.$ti;s.$cn()){var b=s.$Ei.$f3;if(null===u&&(u=b),f.$fub(s.$Ei,new $.C.FWA.$b(0,f.$m38(s.$Ei.$f2).$ck/2)),f.$hub(s.$Ei,new $.C.FWA.$b(0,-f.$m38(s.$Ei.$f3).$ck/2)),n.$f3.$Pt(s.$Ei,$.T.FLC.$b(2,!0)),n.$f4.$Pt(s.$Ei,$.T.FLC.$b(1,!0)),null!==n.$f&&u!==b){var E=null===a?u:a.$no(u),c=null===a?b:a.$no(b);(4===n.$f20||3===n.$f20)!==(2===t.$no(b))?n.$f.$Iw(E,c):n.$f.$Lw(E,c)}}for(var T=new $.FE,h="CG"+_.$WE,v=_.$Nfb(null);v.$ti;v.$cn()){var C=v.$Ei;n.$f16.$Pt(C,h);var D=n.$f15.$no(C.$f3);null!==D&&-1!==T.indexOf(D)||(n.$f17.$Pt(C,h),null!==D&&T.$m(D))}}}f.$btb($.T.HLC.SOURCE_GROUP_ID_DP_KEY,n.$f16),f.$btb($.T.HLC.TARGET_GROUP_ID_DP_KEY,n.$f17),f.$btb($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY,n.$f3),f.$btb($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY,n.$f4)}function l(n,f,i){if(1!==f.$f2.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(f))throw $.IG.$m30(D[4]);if(!n.$f5[f.$WE]){i.$m5(f),n.$f5[f.$WE]=!0;for(var t=0,a=f.$nTa();a.$ti;a.$cn())if(e(n,a.$Fi,i),++t>2)throw $.IG.$m30(D[5])}}function e(n,f,i){if(1===f.$f2.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(f))throw $.IG.$m30(D[6]);if(!n.$f5[f.$WE]){i.$m5(f),n.$f5[f.$WE]=!0;for(var t=f.$dTa();t.$ti;t.$cn())l(n,t.$Fi,i)}}function o(n,f,i){var t=-1,a=-1;for(t=0;t<f.$f1;t++){var r=f.$Wb(t);if(1===r.$f2.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(r)){for(var l=r.$dTa();l.$ti&&!((a=f.indexOf(l.$Fi))>-1);l.$cn());if(a>-1)break}}if(-1!==a){var e=new $.C.EXA.$a,s=f.$Wb(t),b=f.$Wb(a),E=new $.C.EXA.$a;f.$rh(b),e.$m5(b);for(l=b.$dTa();l.$ti;l.$cn()){var c=l.$Fi;f.$rh(c),e.$m5(c);for(var T=c.$nTa();T.$ti;T.$cn()){var h=T.$Fi;h!==b&&(_(n,c,h,s,b)?u(n,c,f,e):E.$m5(c))}}if(f.$APa()){f.$CVa(e),E.$nh(),f.$rh(b),e.$m5(b);for(l=b.$dTa();l.$ti;l.$cn()){c=l.$Fi;f.$rh(c),e.$m5(c),E.$m5(c)}}for(l=E.$EOa();l.$ti;l.$cn())for(var v=l.$Fi.$Qdb(null);v.$ti;v.$cn())if(v.$Ei.$f2!==b){var C=b.$f2;C.$fub(v.$Ei,new $.C.FWA.$b(0,0)),C.$hub(v.$Ei,new $.C.FWA.$b(0,0)),n.$f3.$Pt(v.$Ei,$.T.FLC.$b(0,!0)),n.$f4.$Pt(v.$Ei,$.T.FLC.$b(0,!0)),n.$f19.$m(v.$Ei)}o(n,f,i),o(n,e,i),i.$m(e)}}function _(n,f,i,t,a){return function n(f,i,t,a,r,l){if(!$.KE.$m9(l,new $.T.DNC.T(i,t)))return!0;var e=!0;for(var o=t.$dTa();o.$ti;o.$cn()){var _=o.$Fi;if(_!==i){if(_===a)return!1;for(var u=_.$nTa();u.$ti;u.$cn()){var s=u.$Fi;if(s!==t&&!n(f,_,s,a,r,l)){e=!1;break}}}}return e}(n,f,i,t,a,new $.ME)}function u($,n,f,i){for(var t=n.$nTa();t.$ti;t.$cn()){var a=t.$Fi;if(!(f.indexOf(a)<0)){f.$rh(a),i.$m5(a);for(var r=a.$dTa();r.$ti;r.$cn()){var l=r.$Fi;f.indexOf(l)>-1&&(f.$rh(l),i.$m5(l),u($,l,f,i))}}}}function s($,n,f,i){for(var t=1,a=n.$nTa();a.$ti;a.$cn()){var r=a.$Fi;if(r!==f&&-1===i.indexOf(r)){i.$m5(r);for(var l=r.$dTa();l.$ti;l.$cn()){var e=l.$Fi;e!==n&&(t+=s($,e,r,i))}}}return t}var b=n.lang.ClassDefinition,E=(n.lang.InterfaceDefinition,n.lang.AttributeDefinition,n.lang.EnumDefinition),c=(n.lang.StructDefinition,n.lang.Abstract,n.lang.module),T=(n.lang.delegate,n.lang.Boolean,n.lang.Number,n.lang.Void,n.lang.Object),h=(n.lang.String,n.lang.decorators.Type),v=n.lang.decorators.OptionArgs,C=n.lang.decorators.SetterArg;n.lang.addMappings("yFiles-for-HTML-Complete-2.3.0.3 (Build a8bb13db3ea7)",{get _$_bpd(){return["alignment","$eU",h("yfiles._R.C.FNC",5)]},_$_cpd:["topLayout","$fU"],_$_gff:["partnerlessBelow","$yra"],_$_tyf:["offsetForFamilyNodes","$HBa"],_$_fhg:["familyNodesAlwaysBelow","$ZFa"],get _$_drg(){return["familyMembersSortingPolicy","$cLa",h("yfiles._R.C.GNC",5)]},_$_esg:["spacingBetweenFamilyMembers","$FLa"],get _$_lin(){return["FamilyTreeLayout","DNC",v(C("topLayout"),C("spacingBetweenFamilyMembers"),C("offsetForFamilyNodes"),C("partnerlessBelow"),C("familyNodesAlwaysBelow"),C("alignment","yfiles._R.C.FNC"),C("parallelEdgeRouterEnabled"),C("selfLoopRouterEnabled"),C("familyMembersSortingPolicy","yfiles._R.C.GNC"),C("labeling"),C("selfLoopRouter"),C("parallelEdgeRouter"),C("componentLayout"),C("subgraphLayout"),C("hideGroupsStage"),C("orientationLayout"),C("orientationLayoutEnabled"),C("layoutOrientation","yfiles._R.C.RHC"),C("labelingEnabled"),C("hideGroupsStageEnabled"),C("componentLayoutEnabled"),C("subgraphLayoutEnabled"))]},_$_min:["FamilyType","ENC"],_$_nin:["VerticalNodeAlignment","FNC"],_$_oin:["FamilyMembersSortingPolicy","GNC"],_$$_xsa:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var D=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];c("_$$_xsa",function(f){f._$_lin=new b(function(){return{$extends:$.C.CKC,constructor:function(){$.C.CKC.call(this),this.$f=null,this.$rGa=!1,this.$mua.$HX=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_cpd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var n=this.$fU;return $.C.HJC.isInstance(n)&&(n=n.$Wk),n instanceof $.C.JOC},_$_esg:{get:function(){return this.$f13},set:function(n){if(n<0)throw $.IG.$m2();this.$f13=n}},_$_tyf:{get:function(){return this.$f14},set:function(n){if(n<0)throw $.IG.$m2();this.$f14=n}},_$_gff:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_fhg:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_bpd:{get:function(){return this.$f7},set:function(n){var f=0;switch(0|n){case 1:f=1;break;case 0:f=.5;break;case-1:f=0;break;default:throw $.IG.$m18(D[0])}null!==this.$f12&&this.$f12 instanceof $.C.JOC&&(this.$f12.$XBa.$Ela=f),this.$f7=0|n}},$uKa:{set:function($){this.$f48=$}},$mEa:{set:function($){this.$f31=$}},$f20:0,$f:null,_$_drg:{get:function(){return this.$f20},set:function(n){switch(0|n){case 0:case 1:case 2:case 3:case 4:this.$f20=0|n;break;default:throw $.IG.$m2()}}},$Hfb:function(n){if(null===n.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY))throw $.IG.$m28(D[1]+$.T.DNC.FAMILY_TYPE_DP_KEY+D[2]);var f=new $.C.VXA(n),i=n.$Ndb($.T.YXA.GROUP_DP_KEY),t=n.$Ndb($.T.YXA.PARENT_NODE_ID_DP_KEY),a=n.$Ndb($.T.YXA.NODE_ID_DP_KEY),l=n.$Ndb($.T.YXA.GROUP_NODE_INSETS_DP_KEY),e=new $.C.VXA(n),o=null,_=$.T.WXA.$n(),u=$.T.WXA.$n(),s=$.T.WXA.$n(),b=$.T.WXA.$n(),E=$.T.WXA.$k(),c=null;if(function(n,f){n.$f21=$.T.WXA.$n();var i=f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==i)for(var t=f.$NRa();t.$ti;t.$cn()){var a=t.$Fi;1===i.$no(a)&&n.$f21.$Vt(a,a.$f7)}}(this,n),function(n,f){n.$f22=$.T.WXA.$n();var i=f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY);if(null!==i)for(var t=f.$NRa();t.$ti;t.$cn()){var a=t.$Fi;1===i.$no(a)&&n.$f22.$Vt(a,a.$f6)}}(this,n),null!==i){o=n.$KRa();for(var h=!1,v=n.$MRa();v.$ti;v.$cn()){var C=v.$Ei;i.$ld(C.$f2)!==i.$ld(C.$f3)?(o.$td(C,!0),e.$bVa(C),h=!0):o.$td(C,!1)}h||(n.$Kcb(o),o=null);for(var P=n.$NRa();P.$ti;P.$cn()){var A=P.$Fi;i.$ld(A)&&(E.$Pt(a.$no(A),A),f.$dVa(A),_.$td(A,!0),u.$Pt(A,t.$no(A)),s.$Pt(A,a.$no(A)),b.$Pt(A,l.$no(A)))}null!==i&&n.$nib($.T.YXA.GROUP_DP_KEY),null!==t&&n.$nib($.T.YXA.PARENT_NODE_ID_DP_KEY),null!==a&&n.$nib($.T.YXA.NODE_ID_DP_KEY),null!==l&&n.$nib($.T.YXA.GROUP_NODE_INSETS_DP_KEY)}var Y=new $.T.DNC.T1(this);if(r(this,n,Y),null!==i){var m=new $.C.ZXA(n);for(P=n.$NRa();P.$ti;P.$cn()){A=P.$Fi;if(m.$xab(A)){var d=new $.FE;_.$td(A,!1);for(var N=m.$vab(A).$m3();N.$p;){var F=N.$m(),w=t.$no(F);if(null!==w){for(var O=0;O<d.$Tb;O++)if(w===t.$no(d.$Wb(O))){w=null;break}null!==w&&d.$m(F)}}if(0===d.$Tb){F=m.$vab(A).$fQa();u.$Pt(A,t.$no(F)),s.$Pt(A,a.$no(F))}else if(u.$Pt(A,t.$no(d.$Wb(0))),s.$Pt(A,a.$no(d.$Wb(0))),d.$Tb>1){for(var R=0;R<d.$Tb;R++)for(var K=E.$no(t.$no(d.$Wb(R))),W=0;W<d.$Tb;W++){var g=E.$no(t.$no(d.$Wb(W)));T.equals(a.$no(g),t.$no(K))&&d.$m2(W)}if(u.$Pt(A,t.$no(d.$Wb(0))),s.$Pt(A,a.$no(d.$Wb(0))),1===d.$Tb);else{null===c&&(c=new $.C.EXA.$a);var L=n.$AQa();c.$m5(L),_.$td(L,!0),s.$Pt(L,L);for(O=1;O<d.$Tb;O++)for(var I=d.$Wb(0),X=!1;null!==I;){for(var y=E.$no(t.$no(I)),p=d.$Wb(O);null!==p;){var G=E.$no(t.$no(p));if(G===y){if(d.$Wb(0)!==I)for(var M=0;M<O;M++)d.$Zb(M,I);d.$Zb(O,p),X=!0;break}p=G}if(X)break;for(M=0;M<O;M++)d.$Zb(M,I);I=y}for(O=0;O<d.$Tb;O++)u.$Pt(d.$Wb(O),L);u.$Pt(L,t.$no(d.$Wb(0))),f.$dVa(L)}}}else _.$td(A,!1),u.$Pt(A,t.$no(A)),s.$Pt(A,a.$no(A))}m.$MPa()}var k=new $.T.DNC.T2(this,this.$fU),S=new $.T.DNC.T4(f,i,_,u,s,b,k),x=new $.C.ZJC;x.$Wk=S;var U=new $.C.UIC(x,null);U.$yla=this.$m1();try{new $.T.DNC.T3(this,U,Y,k).$kp(n)}finally{!function(n,f){null!==n.$f16&&(f.$nib($.T.HLC.SOURCE_GROUP_ID_DP_KEY),f.$Kcb(n.$f16),n.$f16=null),null!==n.$f17&&(f.$nib($.T.HLC.TARGET_GROUP_ID_DP_KEY),f.$Kcb(n.$f17),n.$f17=null),null!==n.$f3&&(f.$nib($.T.HLC.SOURCE_PORT_CONSTRAINT_DP_KEY),f.$Kcb(n.$f3),n.$f3=null),null!==n.$f4&&(f.$nib($.T.HLC.TARGET_PORT_CONSTRAINT_DP_KEY),f.$Kcb(n.$f4),n.$f4=null),null!==n.$f8&&(f.$nib($.T.YXA.GROUP_NODE_INSETS_DP_KEY),f.$Lcb(n.$f8),n.$f8=null),null!==n.$f9&&(f.$nib($.T.ZJC.LAYOUT_DP_KEY),f.$Lcb(n.$f9),n.$f9=null),null!==n.$f2&&(f.$nib($.T.YXA.NODE_ID_DP_KEY),f.$Lcb(n.$f2),n.$f2=null),null!==n.$f15&&(f.$nib($.T.YXA.PARENT_NODE_ID_DP_KEY),f.$Lcb(n.$f15),n.$f15=null),null!==n.$f6&&(f.$nib($.T.YXA.GROUP_DP_KEY),f.$Lcb(n.$f6),n.$f6=null),null!==n.$f&&(n.$f.$An(),n.$f=null),n.$f19=null}(this,n),null!==i&&n.$btb($.T.YXA.GROUP_DP_KEY,i),null!==t&&n.$btb($.T.YXA.PARENT_NODE_ID_DP_KEY,t),null!==a&&n.$btb($.T.YXA.NODE_ID_DP_KEY,a),null!==l&&n.$btb($.T.YXA.GROUP_NODE_INSETS_DP_KEY,l)}if(f.$jQa(),null!==c){for(O=0;O<c.$f1;O++)n.$BYa(c.$Wb(O));c=null}if(e.$jQa(),null!==this.$f1)for(O=0;O<this.$f1.$Tb;O++)n.$BYa(this.$f11.$Wb(O));if(null!==o){n.$btb($.T.YSC.AFFECTED_EDGES_DP_KEY,o);var V=new $.C.DTC;V.$Fxa=$.T.YSC.AFFECTED_EDGES_DP_KEY;try{V.$kp(n)}finally{n.$nib($.T.YSC.AFFECTED_EDGES_DP_KEY),n.$Kcb(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new b(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(n,f){$.C.AKC.call(this,f),this.$f=n,this.$f1=$.T.WXA.$l()},$f1:null,"$m!":function($){return this.$f1.$no($)},"$kp!":function($){if(this.$Wk.$kp($),this.$f.$m1())for(var n=$.$NRa();n.$ti;n.$cn())for(var f=n.$Fi.$Qdb(null);f.$ti;f.$cn()){var i=f.$Ei;this.$f1.$Pt(i,$.$hib(i))}},$f:null}}),T3:new b(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(n,f,i,t){$.C.AKC.call(this,f),this.$f=n,this.$f2=i,this.$f1=t},$f2:null,$f1:null,"$kp!":function(n){if(this.$f.$m1()){var f=new $.C.ZXA(n),i=$.T.WXA.$n();!function(n,f,i,t){for(var r=i.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY),l=n.$f.$f11.$EOa();l.$ti;l.$cn()){var e=l.$Fi,o=f.$vab(e);if(a(0,o,r)){t.$td(e,!0);for(var _=o.$EOa();_.$ti;_.$cn()){var u=_.$Fi;if(1!==r.$no(u))for(var s=u.$Qdb(null);s.$ti;s.$cn())n.$f.$f4.$Pt(s.$Ei,null)}}}}(this,f,n,i),this.$Wk.$kp(n),function(n,f,i,t,a){for(var r=f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY),l=n.$f.$f11.$EOa();l.$ti;l.$cn()){var e=l.$Fi;if(t.$ld(e)){for(var o=i.$vab(e),_=null,u=null,s=o.$EOa();s.$ti;s.$cn()){var b=s.$Fi;1!==r.$no(b)&&b.$f6>0&&(null===_?_=b:u=b)}if(null!==_&&null!==u){var E=f.$bZa(_),c=f.$bZa(u),T=a.$m(_.$f11).$f,h=a.$m(u.$f11).$f;if(E>c&&T<h||E<c&&T>h){var v=f.$Gdb(e);for(s=o.$EOa();s.$ti;s.$cn()){b=s.$Fi;var C=v.$f+v.$f3-(f.$bZa(b)-v.$f);f.$Lvb(b,C,f.$cZa(b))}}}}}}(this,n,f,i,this.$f1),function(n,f,i,t){for(var a=f.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY),r=n.$f.$f11.$EOa();r.$ti;r.$cn()){var l=r.$Fi;if(t.$ld(l))for(var e=i.$vab(l).$EOa();e.$ti;e.$cn()){var o=e.$Fi;if(1!==a.$no(o))for(var _=o.$Qdb(null);_.$ti;_.$cn()){var u=_.$Ei;f.$hub(u,new $.C.FWA.$b(0,-f.$m38(o).$ck/2)),n.$f.$f4.$Pt(u,$.T.FLC.$b(1,!0))}}}}(this,n,f,i),n.$btb($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f.$f8);var t=this.$f1.$Wk;t.$wX=0,this.$f2.$f1=!0,this.$Wk.$kp(n),t.$wX=1,this.$f2.$f1=!1,n.$nib($.T.JOC.INCREMENTAL_HINTS_DP_KEY),f.$MPa()}else this.$Wk.$kp(n)},$f:null}}),T4:new b(function(){return{$extends:$.C.AKC,$final:!0,constructor:function(n,f,i,t,a,r,l){$.C.AKC.call(this,l),this.$f=n,this.$f1=f,this.$f2=i,this.$f5=t,this.$f4=a,this.$f3=r},"$kp!":function(n){var f=new $.C.EXA.$b(this.$f.$iTa());this.$f.$jQa(),null!==this.$f1&&(n.$btb($.T.YXA.GROUP_DP_KEY,this.$f2),n.$btb($.T.YXA.PARENT_NODE_ID_DP_KEY,this.$f5),n.$btb($.T.YXA.NODE_ID_DP_KEY,this.$f4),n.$btb($.T.YXA.GROUP_NODE_INSETS_DP_KEY,this.$f3)),this.$CLb(n),this.$f.$eVa(f),n.$nib($.T.YXA.GROUP_DP_KEY),n.$nib($.T.YXA.PARENT_NODE_ID_DP_KEY),n.$nib($.T.YXA.NODE_ID_DP_KEY),n.$nib($.T.YXA.GROUP_NODE_INSETS_DP_KEY)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new b(function(){return{$final:!0,constructor:function($,n){this.$f1=$,this.$f=n},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||n.lang.getType(this)!==n.lang.getType($))return!1;var f=$;return this.$f===f.$f&&this.$f1===f.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new b(function(){return{$final:!0,$with:[$.C.FJC],constructor:function(n){this.$f=n,this.$f1=!1,this.$f3=$.T.WXA.$n(),this.$f2=new $.T.DNC.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$kp!":function(n){if(1!==n.$XR){if(2===n.$XR&&this.$f.$f10&&this.$f.$f22.$to(n.$WR)<2&&this.$f.$f22.$to(n.$PO)<2){for(var f=null,i=null,t=n.$NRa();t.$ti;t.$cn()){var a=t.$Fi;1!==n.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(a)?f=a:i=a}if(null!==f&&null!==i){var r=n.$m38(f),l=n.$m38(i);r.$bv(-r.$Gj/2,0),l.$bv(-l.$Gj/2,r.$ck+this.$f.$f14);for(var e=i.$Qdb(null);e.$ti;e.$cn()){var o=e.$Ei;($$=n.$m37(o)).$On(),$$.$pl=new $.C.FWA.$b(0,0),$$.$ql=new $.C.FWA.$b(0,0)}var _=this.$f.$f8.$no(f),u=new $.C.WVA(_.top,_.left,-this.$f.$f14-n.$m38(i).$ck,_.right);return void this.$f.$f8.$Pt(f,u)}}var b=new $.C.EXA.$a;if(this.$f1)b.$BVa(n.$NRa()),b.$fVa(new $.T.DNC.T1.T1(this,n));else{var E=new $.C.EXA.$a,c=new $.C.EXA.$a;for(t=n.$NRa();t.$ti;t.$cn()){a=t.$Fi;1!==n.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(a)?E.$m5(a):c.$m5(a)}for(var T=null,h=0,v=0;v<E.$f1;v++){(H=E.$Wb(v)).$dTa().$Di>h&&(h=H.$dTa().$Di,T=H)}E.$rh(T),b.$m5(T),function n(f,i,t,a,r){for(var l=new $.C.EXA.$a,e=r.$dTa();e.$ti;e.$cn()){var o=e.$Fi;if(t.$rh(o)){var _=s(f,o,r,new $.C.EXA.$d(r));f.$f3.$Vt(o,_),l.$m5(o)}}l.$fVa(f.$f2);var u=r.$f2.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY),b=!1;if(1===l.$f1&&a.indexOf(r)===a.$f1-1&&(b=!0),2===f.$f.$f20||4===f.$f.$f20)for(var E=0;E<l.$f1;E++)4===f.$f.$f20===(2===u.$no(r))?a.$m5(l.$Wb(E)):a.$vh(0,l.$Wb(E));else if(0!==f.$f.$f20&&1===a.$f1&&1===l.$f1)3===f.$f.$f20===(2===u.$no(r))?a.$m5(l.$Wb(0)):a.$vh(0,l.$Wb(0));else{var c=a.indexOf(r),T=a.indexOf(r)+1;for(E=0;E<l.$f1;E++)E%2!==0||b?a.$vh(T,l.$Wb(E)):a.$vh(c,l.$Wb(E)),T++}var h=new $.C.EXA.$a;for(E=0;E<l.$f1;E++){for(var v=!1,C=null,D=(o=l.$Wb(E)).$nTa();D.$ti;D.$cn())if((C=D.$Fi)!==r){v=!0;break}if(i.$rh(C)){h.$m5(C);var P=a.indexOf(o);a.indexOf(r)>P?a.$vh(a.indexOf(o),C):a.$vh(a.indexOf(o)+1,C)}else if(v){var A=0;for(a.$rh(o),D=o.$nTa();D.$ti;D.$cn())A=Math.max(a.indexOf(D.$Fi),A);a.$vh(A,o)}}l=null;for(E=0;E<h.$f1;E++)n(f,i,t,a,h.$Wb(E))}(this,E,c,b,T)}var C=new $.C.EXA.$a,D=new $.C.EXA.$a,P=new $.FE,A=0,Y=0,m=Number.MAX_VALUE;for(v=0;v<b.$f1;v++){a=b.$Wb(v);var d=n.$m38(a);1===n.$Ndb($.T.DNC.FAMILY_TYPE_DP_KEY).$no(a)?(C.$m5(a),P.$m(v),d.$bv(A+Math.max((this.$f.$f13-d.$Gj)/2,d.$Gj/4),-d.$ck/2),A=A+Math.max(1.5*d.$Gj,this.$f.$f13)|0):(D.$m5(a),m=Math.min(d.$ck,m),Y=Math.max(d.$ck,Y),d.$bv(A,-d.$ck/2),A=A+d.$Gj|0)}if(0!==this.$f.$f7)for(v=0;v<D.$f1;v++){d=n.$m38(D.$Wb(v));1===this.$f.$f7?d.$bv(d.$ri,-(d.$ck-m/2)):d.$bv(d.$ri,-m/2)}var N=$.DF.$m10(b.$f1),F=-2;for(v=0;v<C.$f1;v++){var w=C.$Wb(v),O=!1,R=$.VE.$m8(P.$Wb(v));if(this.$f.$f18||F===R-1&&0===N[F])O=!0;else for(var K=w.$nTa();K.$ti;K.$cn()){var W=K.$Fi,g=b.indexOf(W)-R;if(Math.abs(g)>2){O=!0;break}}if(O)N[R]=1;else{var L=new $.C.FWA.$b(0,0);for(e=w.$Qdb(null);e.$ti;e.$cn()){o=e.$Ei;if(($$=n.$m37(o)).$On(),0===this.$f.$f7)$$.$pl=L;else{d=n.$m38(o.$f2);n.$eub(o,new $.C.FWA.$b(d.$ri+d.$Gj/2,0))}$$.$ql=L}C.$m8(v),P.$m2(v),v--}F=R}var I,X=Y/2;1===this.$f.$f7?X=m/2:-1===this.$f.$f7&&(X=Y-m/2),I=X;for(v=0;v<C.$f1;v++){w=C.$Wb(v);for(var y=$.VE.$m8(P.$Wb(v)),p=0,G=w.$nTa();G.$ti;G.$cn()){for(var M=b.indexOf(G.$Fi),k=Math.min(y,M),S=Math.max(y,M),x=0,U=k;U<=S;U++)x+=N[U];p=Math.max(x,p)}d=n.$m38(w);var V=X+this.$f.$f14+(d.$ck+this.$f.$f14)*(p-1);d.$bv(d.$ri,V),I=Math.max(I,V+d.$ck)}for(var j=0;j<D.$f1;j++){var H=D.$Wb(j),Q=b.indexOf(H),B=0,Z=new $.C.IVA.$a;for(e=H.$Nfb(null);e.$ti;e.$cn()){o=e.$Ei;N[b.indexOf(o.$f3)]>0&&(Z.$m5(o),B++)}if(B>0){var J=n.$m38(H).$Gj/(B+1),q=$.DF.$m10(Z.$f1),z=$.DF.$m10(Z.$f1);for(v=0;v<Z.$f1;v++){q[v]=b.indexOf(Z.$Wb(v).$f3)-Q,q[v]>0&&(q[v]-=2*b.$f1),z[v]=J;for(U=0;U<v;U++)q[v]>q[U]?z[U]+=J:z[v]+=J}for(v=0;v<Z.$f1;v++){var $$;o=Z.$Wb(v);($$=n.$m37(o)).$On(),$$.$ql=new $.C.FWA.$b(0,0);var n$=n.$m38(H),f$=n.$m38(o.$f3),i$=this.$f.$f19.$fc(o)?n$.$Gj/2:z[v],t$=f$.$si+f$.$ck/2;$$.$pl=new $.C.FWA.$b(i$-n$.$Gj/2,0),$$.$ru(n$.$ri+i$,t$)}}}var a$=(_=this.$f.$f8.$no(D.$Wb(0))).top,r$=_.bottom;null!==_&&0===this.$f.$f7?a$=I-X:null!==_&&1===this.$f.$f7&&(r$=X-I),this.$f.$f8.$Pt(D.$Wb(0),new $.C.WVA(a$,_.left,r$,_.right))}},$f:null,$static:{T:new b(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,n,f){this.$f1=$,this.$f=n,this.$f2=f},$f:null,$f2:null,"$wh!":function(n,f){var i=$.T.QXA.$m(this.$f.$to(n),this.$f.$to(f));return 0!==i?i:$.T.QXA.$m(this.$f2.$to(n),this.$f2.$to(f))},$f1:null}}),T1:new b(function(){return{$final:!0,$with:[$.C.QYA],constructor:function($,n){this.$f1=$,this.$f=n},$f:null,"$wh!":function(n,f){return $.T.QXA.$i(this.$f.$bZa(n),this.$f.$bZa(f))},$f1:null}})}}}),$clinit:function(){$.T.DNC.FAMILY_TYPE_DP_KEY=new $.C.GVA($.C.ENC.$class,$.C.DNC.$class,D[3])}}}})}),c("_$$_xsa",function($){$._$_min=new E(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),c("_$$_xsa",function($){$._$_nin=new E(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})}),c("_$$_xsa",function($){$._$_oin=new E(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;
