/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.5.0.1.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2022 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from "./core.js";import l from "./lang.js";import _a_ from "./algorithms.js";import _b_ from "./layout-core.js";import _c_ from "./layout-hierarchic.js";import _d_ from "./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($, f, n, i){"use strict";function t(f){var n=new $.C.GCD,i=n.$LIa;i.$sga=new $.C.DDD.$b(0,!1),i.$ZRa=60,i.$NQa=20;var t=n.$RIa;switch(f.$f7){case-1:t.$pqa=0;break;case 0:t.$pqa=.5;break;case 1:t.$pqa=1}return n}function r($, f, n, i){for(var t=1,l=f.$tbb(); l.$Ti; l.$Cn()){var a=l.$fj;if(a!==n&&-1===i.indexOf(a)){i.$m6(a);for(var e=a.$jbb(); e.$Ti; e.$Cn()){var o=e.$fj;o!==f&&(t+=r($,o,a,i))}}}return t}function l($, f, n){for(var i=0,t=0,r=f.$HWa(); r.$Ti; r.$Cn()){var l=r.$fj;1===n.$No(l)?l.$f7>0&&t++:i+=l.$f6}return t<=1&&2===i}function a(f, n, i){var t=n.$Dmb($.O.$p54);f.$f16=n.$QZa(),f.$f17=n.$QZa(),f.$f3=n.$QZa(),f.$f4=n.$QZa(),f.$f12 instanceof $.C.GCD&&0!==f.$f20&&(f.$f=f.$f12.$Zyb(n)),function(f, n, i){f.$f5=$.GF.$m14(n.$iU),f.$f1=new $.KE;var t=new $.KE;f.$f11=new $.C.KHB.$a,f.$f2=n.$RZa(),f.$f15=n.$RZa(),f.$f6=n.$RZa(),f.$f9=n.$RZa(),f.$f8=n.$RZa(),f.$f19=new $.RE;for(var r=n.$TZa(); r.$Ti; r.$Cn()){var l=new $.C.KHB.$a,a=r.$fj;f.$f2.$qu(a,"n"+a.$KF),1===n.$Dmb($.O.$p54).$No(a)?e(f,a,l):o(f,a,l);var b=new $.KE;b.$m(l),u(f,l,b);for(var s=0; s<b.$Tb; s++)if((l=b.$Wb(s)).$f1>1){for(var h=new $.KH.$c1("GN"),C=0; C<l.$f1; C++)h.$m2($.OF.$m8(l.$Wb(C).$KF)),h.$m2("/");t.$m(h.toString()),f.$f1.$m(l)}}for(var m=0; m<f.$f1.$Tb; m++){var v=new $.C.CGB(0,0,0,0),T=n.$HYa(),l=f.$f1.$Wb(m);f.$f11.$m6(T);for(var c=0; c<l.$f1; c++){var w=l.$Wb(c);f.$f15.$qu(w,t.$Wb(m)),f.$f9.$qu(w,i),f.$f8.$qu(w,v)}f.$f8.$qu(T,v),f.$f6.$td(T,!0),f.$f2.$qu(T,t.$Wb(m))}n.$zCb($.O.$p4,f.$f2),n.$zCb($.O.$p35,f.$f15),n.$zCb($.O.$p3,f.$f6),n.$zCb($.O.$p67,f.$f8),n.$zCb($.O.$p26,f.$f9)}(f,n,i);for(var r=n.$Dmb($.O.$p1),l=n.$TZa(); l.$Ti; l.$Cn()){var a=l.$fj;if(1===n.$Dmb($.O.$p54).$No(a)){for(var b=null,s=a.$Dob(null); s.$Ti; s.$Cn()){var h=s.$ej.$f3;if(null===b&&(b=h),n.$DDb(s.$ej,new $.C.LGB.$b(0,n.$m38(s.$ej.$f2).$Ck/2)),n.$FDb(s.$ej,new $.C.LGB.$b(0,-n.$m38(s.$ej.$f3).$Ck/2)),f.$f3.$qu(s.$ej,$.T.AZC.$b(2,!0)),f.$f4.$qu(s.$ej,$.T.AZC.$b(1,!0)),null!==f.$f&&b!==h){var C=null===r?b:r.$No(b),m=null===r?h:r.$No(h);(4===f.$f20||3===f.$f20)!==(2===t.$No(h))?f.$f.$jx(C,m):f.$f.$mx(C,m)}}for(var v=new $.KE,T="CG"+a.$KF,c=a.$Dob(null); c.$Ti; c.$Cn()){var w=c.$ej;f.$f16.$qu(w,T);var p=f.$f15.$No(w.$f3);null!==p&&-1!==v.indexOf(p)||(f.$f17.$qu(w,T),null!==p&&v.$m(p))}}}n.$zCb($.O.$p111,f.$f16),n.$zCb($.O.$p112,f.$f17),n.$zCb($.O.$p171,f.$f3),n.$zCb($.O.$p172,f.$f4)}function e(f, n, i){if(1!==n.$f2.$Dmb($.O.$p54).$No(n))throw $.MG.$m30(p[5]);if(!f.$f5[n.$KF]){i.$m6(n),f.$f5[n.$KF]=!0;for(var t=0,r=n.$tbb(); r.$Ti; r.$Cn())if(o(f,r.$fj,i),++t>2)throw $.MG.$m30(p[6])}}function o(f, n, i){if(1===n.$f2.$Dmb($.O.$p54).$No(n))throw $.MG.$m30(p[7]);if(!f.$f5[n.$KF]){i.$m6(n),f.$f5[n.$KF]=!0;for(var t=n.$jbb(); t.$Ti; t.$Cn())e(f,t.$fj,i)}}function u(f, n, i){var t=-1,r=-1;for(t=0; t<n.$f1; t++){var l=n.$Wb(t);if(1===l.$f2.$Dmb($.O.$p54).$No(l)){for(var a=l.$jbb(); a.$Ti&&!((r=n.indexOf(a.$fj))>-1); a.$Cn());if(r>-1)break}}if(-1!==r){var e=new $.C.KHB.$a,o=n.$Wb(t),h=n.$Wb(r),C=new $.C.KHB.$a;n.$Oh(h),e.$m6(h);for(a=h.$jbb(); a.$Ti; a.$Cn()){var m=a.$fj;n.$Oh(m),e.$m6(m);for(var v=m.$tbb(); v.$Ti; v.$Cn()){var T=v.$fj;T!==h&&(b(f,m,T,o,h)?s(f,m,n,e):C.$m6(m))}}if(n.$HXa()){n.$Ndb(e),C.$Kh(),n.$Oh(h),e.$m6(h);for(a=h.$jbb(); a.$Ti; a.$Cn()){m=a.$fj;n.$Oh(m),e.$m6(m),C.$m6(m)}}for(a=C.$HWa(); a.$Ti; a.$Cn())for(var c=a.$fj.$Gmb(null); c.$Ti; c.$Cn())if(c.$ej.$f2!==h){var w=h.$f2;w.$DDb(c.$ej,new $.C.LGB.$b(0,0)),w.$FDb(c.$ej,new $.C.LGB.$b(0,0)),f.$f3.$qu(c.$ej,$.T.AZC.$b(0,!0)),f.$f4.$qu(c.$ej,$.T.AZC.$b(0,!0)),f.$f19.$m(c.$ej)}u(f,n,i),u(f,e,i),i.$m(e)}}function b(f, n, i, t, r){return function f(n, i, t, r, l, a){if(!$.PE.$m9(a,new $.T.ZAD.T(i,t)))return!0;var e=!0;for(var o=t.$jbb(); o.$Ti; o.$Cn()){var u=o.$fj;if(u!==i){if(u===r)return!1;for(var b=u.$tbb(); b.$Ti; b.$Cn()){var s=b.$fj;if(s!==t&&!f(n,u,s,r,l,a)){e=!1;break}}}}return e}(f,n,i,t,r,new $.RE)}function s($, f, n, i){for(var t=f.$tbb(); t.$Ti; t.$Cn()){var r=t.$fj;if(!(n.indexOf(r)<0)){n.$Oh(r),i.$m6(r);for(var l=r.$jbb(); l.$Ti; l.$Cn()){var a=l.$fj;n.indexOf(a)>-1&&(n.$Oh(a),i.$m6(a),s($,a,n,i))}}}}var h=f.lang.ClassDefinition,C=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),m=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),v=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),T=(f.lang.String,f.lang.decorators.Type),c=f.lang.decorators.OptionArgs,w=f.lang.decorators.SetterArg;f.lang.addMappings("yFiles-for-HTML-Complete-2.5.0.1 (Build 4531dbdf9dc6)",{get _$_kyd(){return["alignment","$SW",T("yfiles._R.C.BBD",5)]},_$_lyd:["topLayout","$TW"],_$_gtf:["partnerlessBelow","$dxa"],_$_cpg:["offsetForFamilyNodes","$BIa"],_$_nyg:["familyNodesAlwaysBelow","$tNa"],get _$_gjh(){return["familyMembersSortingPolicy","$USa",T("yfiles._R.C.CBD",5)]},_$_jkh:["spacingBetweenFamilyMembers","$ATa"],get _$_wjo(){return["FamilyTreeLayout","ZAD",c(w("topLayout"),w("spacingBetweenFamilyMembers"),w("offsetForFamilyNodes"),w("partnerlessBelow"),w("familyNodesAlwaysBelow"),w("alignment","yfiles._R.C.BBD"),w("parallelEdgeRouterEnabled"),w("selfLoopRouterEnabled"),w("familyMembersSortingPolicy","yfiles._R.C.CBD"),w("labeling"),w("selfLoopRouter"),w("parallelEdgeRouter"),w("componentLayout"),w("subgraphLayout"),w("hideGroupsStage"),w("orientationLayout"),w("orientationLayoutEnabled"),w("layoutOrientation","yfiles._R.C.GVC"),w("labelingEnabled"),w("hideGroupsStageEnabled"),w("componentLayoutEnabled"),w("subgraphLayoutEnabled"))]},_$_xjo:["FamilyType","ABD"],_$_yjo:["VerticalNodeAlignment","BBD"],_$_zjo:["FamilyMembersSortingPolicy","CBD"],_$$_hbb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var p=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];m("_$$_hbb",function($){$._$_zjo=new C(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),m("_$$_hbb",function(n){n._$_wjo=new h(function(){return{$extends:$.C.UXC,constructor:function(){$.C.UXC.call(this),this.$f=null,this.$MNa=!1,this.$hAa.$Raa=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_lyd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$TW;return $.C.YWC.isInstance(f)&&(f=f.$wl),f instanceof $.C.GCD},_$_jkh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.MG.$m2();this.$f13=f}},_$_cpg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.MG.$m2();this.$f14=f}},_$_gtf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_nyg:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_kyd:{get:function(){return this.$f7},set:function(f){var n=0;switch(0|f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.MG.$m18(p[0])}null!==this.$f12&&this.$f12 instanceof $.C.GCD&&(this.$f12.$RIa.$pqa=n),this.$f7=0|f}},$iSa:{set:function($){this.$f49=$}},$qLa:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_gjh:{get:function(){return this.$f20},set:function(f){switch(0|f){case 0:case 1:case 2:case 3:case 4:this.$f20=0|f;break;default:throw $.MG.$m2()}}},$xob:function(f){if(null===f.$Dmb($.O.$p54))throw $.MG.$m28(p[1]+$.O.$p54+p[2]);var n=new $.C.CIB(f),i=f.$Dmb($.O.$p3),t=f.$Dmb($.O.$p35),r=f.$Dmb($.O.$p4),l=f.$Dmb($.O.$p67),e=new $.C.CIB(f),o=null,u=$.T.DIB.$n(),b=$.T.DIB.$n(),s=$.T.DIB.$n(),h=$.T.DIB.$n(),C=$.T.DIB.$k(),m=null;if(function(f, n){f.$f21=$.T.DIB.$n();var i=n.$Dmb($.O.$p54);if(null!==i)for(var t=n.$TZa(); t.$Ti; t.$Cn()){var r=t.$fj;1===i.$No(r)&&f.$f21.$wu(r,r.$f7)}}(this,f),function(f, n){f.$f22=$.T.DIB.$n();var i=n.$Dmb($.O.$p54);if(null!==i)for(var t=n.$TZa(); t.$Ti; t.$Cn()){var r=t.$fj;1===i.$No(r)&&f.$f22.$wu(r,r.$f6)}}(this,f),null!==i){o=f.$QZa();for(var T=!1,c=f.$SZa(); c.$Ti; c.$Cn()){var w=c.$ej;i.$ld(w.$f2)!==i.$ld(w.$f3)?(o.$td(w,!0),e.$mdb(w),T=!0):o.$td(w,!1)}T||(f.$vlb(o),o=null);for(var d=f.$TZa(); d.$Ti; d.$Cn()){var O=d.$fj;i.$ld(O)&&(C.$qu(r.$No(O),O),n.$odb(O),u.$td(O,!0),b.$qu(O,t.$No(O)),s.$qu(O,r.$No(O)),h.$qu(O,l.$No(O)))}null!==i&&f.$erb($.O.$p3),null!==t&&f.$erb($.O.$p35),null!==r&&f.$erb($.O.$p4),null!==l&&f.$erb($.O.$p67)}var j=new $.T.ZAD.T1(this);if(a(this,f,j),null!==i){var _=new $.C.GIB(f);for(d=f.$TZa(); d.$Ti; d.$Cn()){O=d.$fj;if(_.$hjb(O)){var g=new $.KE;u.$td(O,!1);for(var D=_.$fjb(O).$m4(); D.$p;){var y=D.$m(),B=t.$No(y);if(null!==B){for(var N=0; N<g.$Tb; N++)if(B===t.$No(g.$Wb(N))){B=null;break}null!==B&&g.$m(y)}}if(0===g.$Tb){y=_.$fjb(O).$mYa();b.$qu(O,t.$No(y)),s.$qu(O,r.$No(y))}else if(b.$qu(O,t.$No(g.$Wb(0))),s.$qu(O,r.$No(g.$Wb(0))),g.$Tb>1){for(var W=0; W<g.$Tb; W++)for(var L=C.$No(t.$No(g.$Wb(W))),q=0; q<g.$Tb; q++){var k=C.$No(t.$No(g.$Wb(q)));v.equals(r.$No(k),t.$No(L))&&g.$m3(q)}if(b.$qu(O,t.$No(g.$Wb(0))),s.$qu(O,r.$No(g.$Wb(0))),1===g.$Tb);else{null===m&&(m=new $.C.KHB.$a);var G=f.$HYa();m.$m6(G),u.$td(G,!0),s.$qu(G,G);for(N=1; N<g.$Tb; N++)for(var A=g.$Wb(0),Z=!1; null!==A;){for(var E=C.$No(t.$No(A)),F=g.$Wb(N); null!==F;){var M=C.$No(t.$No(F));if(M===E){if(g.$Wb(0)!==A)for(var x=0; x<N; x++)g.$Zb(x,A);g.$Zb(N,F),Z=!0;break}F=M}if(Z)break;for(x=0; x<N; x++)g.$Zb(x,A);A=E}for(N=0; N<g.$Tb; N++)b.$qu(g.$Wb(N),G);b.$qu(G,t.$No(g.$Wb(0))),n.$odb(G)}}}else u.$td(O,!1),b.$qu(O,t.$No(O)),s.$qu(O,r.$No(O))}_.$TXa()}var R=new $.T.ZAD.T2(this,this.$TW),S=new $.T.ZAD.T4(n,i,u,b,s,h,R),H=new $.C.RXC;H.$wl=S;var K=new $.C.LWC(H,null);K.$jqa=this.$m1();try{new $.T.ZAD.T3(this,K,j,R).$Lp(f)}finally{!function(f, n){null!==f.$f16&&(n.$erb($.O.$p111),n.$vlb(f.$f16),f.$f16=null),null!==f.$f17&&(n.$erb($.O.$p112),n.$vlb(f.$f17),f.$f17=null),null!==f.$f3&&(n.$erb($.O.$p171),n.$vlb(f.$f3),f.$f3=null),null!==f.$f4&&(n.$erb($.O.$p172),n.$vlb(f.$f4),f.$f4=null),null!==f.$f8&&(n.$erb($.O.$p67),n.$wlb(f.$f8),f.$f8=null),null!==f.$f9&&(n.$erb($.O.$p26),n.$wlb(f.$f9),f.$f9=null),null!==f.$f2&&(n.$erb($.O.$p4),n.$wlb(f.$f2),f.$f2=null),null!==f.$f15&&(n.$erb($.O.$p35),n.$wlb(f.$f15),f.$f15=null),null!==f.$f6&&(n.$erb($.O.$p3),n.$wlb(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$ao(),f.$f=null),f.$f19=null}(this,f),null!==i&&f.$zCb($.O.$p3,i),null!==t&&f.$zCb($.O.$p35,t),null!==r&&f.$zCb($.O.$p4,r),null!==l&&f.$zCb($.O.$p67,l)}if(n.$qYa(),null!==m){for(N=0; N<m.$f1; N++)f.$Ugb(m.$Wb(N));m=null}if(e.$qYa(),null!==this.$f1)for(N=0; N<this.$f1.$Tb; N++)f.$Ugb(this.$f11.$Wb(N));if(null!==o){f.$zCb($.O.$p94,o);var I=new $.C.EHD;I.$TDa=$.O.$p94;try{I.$Lp(f)}finally{f.$erb($.O.$p94),f.$vlb(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new h(function(){return{$extends:$.C.SXC,$final:!0,constructor:function(f, n){$.C.SXC.call(this,n),this.$f=f,this.$f1=$.T.DIB.$l()},$f1:null,"$m!":function($){return this.$f1.$No($)},"$Lp!":function($){if(this.$wl.$Lp($),this.$f.$m1())for(var f=$.$TZa(); f.$Ti; f.$Cn())for(var n=f.$fj.$Gmb(null); n.$Ti; n.$Cn()){var i=n.$ej;this.$f1.$qu(i,$.$Yqb(i))}},$f:null}}),T3:new h(function(){return{$extends:$.C.SXC,$final:!0,constructor:function(f, n, i, t){$.C.SXC.call(this,n),this.$f=f,this.$f2=i,this.$f1=t},$f2:null,$f1:null,"$Lp!":function(f){if(this.$f.$m1()){var n=new $.C.GIB(f),i=$.T.DIB.$n();!function(f, n, i, t){for(var r=i.$Dmb($.O.$p54),a=f.$f.$f11.$HWa(); a.$Ti; a.$Cn()){var e=a.$fj,o=n.$fjb(e);if(l(0,o,r)){t.$td(e,!0);for(var u=o.$HWa(); u.$Ti; u.$Cn()){var b=u.$fj;if(1!==r.$No(b))for(var s=b.$Gmb(null); s.$Ti; s.$Cn())f.$f.$f4.$qu(s.$ej,null)}}}}(this,n,f,i),this.$wl.$Lp(f),function(f, n, i, t, r){for(var l=n.$Dmb($.O.$p54),a=f.$f.$f11.$HWa(); a.$Ti; a.$Cn()){var e=a.$fj;if(t.$ld(e)){for(var o=i.$fjb(e),u=null,b=null,s=o.$HWa(); s.$Ti; s.$Cn()){var h=s.$fj;1!==l.$No(h)&&h.$f6>0&&(null===u?u=h:b=h)}if(null!==u&&null!==b){var C=n.$whb(u),m=n.$whb(b),v=r.$m(u.$f11).$f,T=r.$m(b.$f11).$f;if(C>m&&v<T||C<m&&v>T){var c=n.$wmb(e);for(s=o.$HWa(); s.$Ti; s.$Cn()){h=s.$fj;var w=c.$f+c.$f3-(n.$whb(h)-c.$f);n.$BFb(h,w,n.$xhb(h))}}}}}}(this,f,n,i,this.$f1),function(f, n, i, t){for(var r=n.$Dmb($.O.$p54),l=f.$f.$f11.$HWa(); l.$Ti; l.$Cn()){var a=l.$fj;if(t.$ld(a))for(var e=i.$fjb(a).$HWa(); e.$Ti; e.$Cn()){var o=e.$fj;if(1!==r.$No(o))for(var u=o.$Gmb(null); u.$Ti; u.$Cn()){var b=u.$ej;n.$FDb(b,new $.C.LGB.$b(0,-n.$m38(o).$Ck/2)),f.$f.$f4.$qu(b,$.T.AZC.$b(1,!0))}}}}(this,f,n,i),f.$zCb($.O.$p67,this.$f.$f8);var t=this.$f1.$wl;t.$Eaa=0,this.$f2.$f1=!0,this.$wl.$Lp(f),t.$Eaa=1,this.$f2.$f1=!1,f.$erb($.O.$p154),n.$TXa()}else this.$wl.$Lp(f)},$f:null}}),T4:new h(function(){return{$extends:$.C.SXC,$final:!0,constructor:function(f, n, i, t, r, l, a){$.C.SXC.call(this,a),this.$f=f,this.$f1=n,this.$f2=i,this.$f5=t,this.$f4=r,this.$f3=l},"$Lp!":function(f){var n=new $.C.KHB.$b(this.$f.$obb());this.$f.$qYa(),null!==this.$f1&&(f.$zCb($.O.$p3,this.$f2),f.$zCb($.O.$p35,this.$f5),f.$zCb($.O.$p4,this.$f4),f.$zCb($.O.$p67,this.$f3)),this.$zWb(f),this.$f.$pdb(n),f.$erb($.O.$p3),f.$erb($.O.$p35),f.$erb($.O.$p4),f.$erb($.O.$p67)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new h(function(){return{$final:!0,constructor:function($, f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new h(function(){return{$final:!0,$with:[$.C.WWC],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.DIB.$n(),this.$f2=new $.T.ZAD.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$Lp!":function(f){if(1!==f.$iU){if(2===f.$iU&&this.$f.$f10&&this.$f.$f22.$To(f.$hU)<2&&this.$f.$f22.$To(f.$OQ)<2){for(var n=null,i=null,t=f.$TZa(); t.$Ti; t.$Cn()){var l=t.$fj;1!==f.$Dmb($.O.$p54).$No(l)?n=l:i=l}if(null!==n&&null!==i){var a=f.$m38(n),e=f.$m38(i);a.$Cv(-a.$gk/2,0),e.$Cv(-e.$gk/2,a.$Ck+this.$f.$f14);for(var o=i.$Gmb(null); o.$Ti; o.$Cn()){var u=o.$ej;($$=f.$m37(u)).$oo(),$$.$Pl=new $.C.LGB.$b(0,0),$$.$Ql=new $.C.LGB.$b(0,0)}var b=this.$f.$f8.$No(n),s=new $.C.CGB(b.top,b.left,-this.$f.$f14-f.$m38(i).$Ck,b.right);return void this.$f.$f8.$qu(n,s)}}var h=new $.C.KHB.$a;if(this.$f1)h.$Mdb(f.$TZa()),h.$qdb(new $.T.ZAD.T1.T1(this,f));else{var C=new $.C.KHB.$a,m=new $.C.KHB.$a;for(t=f.$TZa(); t.$Ti; t.$Cn()){l=t.$fj;1!==f.$Dmb($.O.$p54).$No(l)?C.$m6(l):m.$m6(l)}for(var v=null,T=0,c=0; c<C.$f1; c++){(Y=C.$Wb(c)).$jbb().$dj>T&&(T=Y.$jbb().$dj,v=Y)}C.$Oh(v),h.$m6(v),function f(n, i, t, l, a){for(var e=new $.C.KHB.$a,o=a.$jbb(); o.$Ti; o.$Cn()){var u=o.$fj;if(t.$Oh(u)){var b=r(n,u,a,new $.C.KHB.$d(a));n.$f3.$wu(u,b),e.$m6(u)}}e.$qdb(n.$f2);var s=a.$f2.$Dmb($.O.$p54),h=!1;if(1===e.$f1&&l.indexOf(a)===l.$f1-1&&(h=!0),2===n.$f.$f20||4===n.$f.$f20)for(var C=0; C<e.$f1; C++)4===n.$f.$f20===(2===s.$No(a))?l.$m6(e.$Wb(C)):l.$Sh(0,e.$Wb(C));else if(0!==n.$f.$f20&&1===l.$f1&&1===e.$f1)3===n.$f.$f20===(2===s.$No(a))?l.$m6(e.$Wb(0)):l.$Sh(0,e.$Wb(0));else{var m=l.indexOf(a),v=l.indexOf(a)+1;for(C=0; C<e.$f1; C++)C%2!==0||h?l.$Sh(v,e.$Wb(C)):l.$Sh(m,e.$Wb(C)),v++}var T=new $.C.KHB.$a;for(C=0; C<e.$f1; C++){for(var c=!1,w=null,p=(u=e.$Wb(C)).$tbb(); p.$Ti; p.$Cn())if((w=p.$fj)!==a){c=!0;break}if(i.$Oh(w)){T.$m6(w);var d=l.indexOf(u);l.indexOf(a)>d?l.$Sh(l.indexOf(u),w):l.$Sh(l.indexOf(u)+1,w)}else if(c){var O=0;for(l.$Oh(u),p=u.$tbb(); p.$Ti; p.$Cn())O=Math.max(l.indexOf(p.$fj),O);l.$Sh(O,u)}}e=null;for(C=0; C<T.$f1; C++)f(n,i,t,l,T.$Wb(C))}(this,C,m,h,v)}var w=new $.C.KHB.$a,p=new $.C.KHB.$a,d=new $.KE,O=0,j=0,_=Number.MAX_VALUE;for(c=0; c<h.$f1; c++){l=h.$Wb(c);var g=f.$m38(l);1===f.$Dmb($.O.$p54).$No(l)?(w.$m6(l),d.$m(c),g.$Cv(O+Math.max((this.$f.$f13-g.$gk)/2,g.$gk/4),-g.$Ck/2),O=O+Math.max(1.5*g.$gk,this.$f.$f13)|0):(p.$m6(l),_=Math.min(g.$Ck,_),j=Math.max(g.$Ck,j),g.$Cv(O,-g.$Ck/2),O=O+g.$gk|0)}if(0!==this.$f.$f7)for(c=0; c<p.$f1; c++){g=f.$m38(p.$Wb(c));1===this.$f.$f7?g.$Cv(g.$Ri,-(g.$Ck-_/2)):g.$Cv(g.$Ri,-_/2)}var D=$.GF.$m11(h.$f1),y=-2;for(c=0; c<w.$f1; c++){var B=w.$Wb(c),N=!1,W=$.YE.$m8(d.$Wb(c));if(this.$f.$f18||y===W-1&&0===D[y])N=!0;else for(var L=B.$tbb(); L.$Ti; L.$Cn()){var q=L.$fj,k=h.indexOf(q)-W;if(Math.abs(k)>2){N=!0;break}}if(N)D[W]=1;else{var G=new $.C.LGB.$b(0,0);for(o=B.$Gmb(null); o.$Ti; o.$Cn()){u=o.$ej;if(($$=f.$m37(u)).$oo(),0===this.$f.$f7)$$.$Pl=G;else{g=f.$m38(u.$f2);f.$CDb(u,new $.C.LGB.$b(g.$Ri+g.$gk/2,0))}$$.$Ql=G}w.$m9(c),d.$m3(c),c--}y=W}var A,Z=j/2;1===this.$f.$f7?Z=_/2:-1===this.$f.$f7&&(Z=j-_/2),A=Z;for(c=0; c<w.$f1; c++){B=w.$Wb(c);for(var E=$.YE.$m8(d.$Wb(c)),F=0,M=B.$tbb(); M.$Ti; M.$Cn()){for(var x=h.indexOf(M.$fj),R=Math.min(E,x),S=Math.max(E,x),H=0,K=R; K<=S; K++)H+=D[K];F=Math.max(H,F)}g=f.$m38(B);var I=Z+this.$f.$f14+(g.$Ck+this.$f.$f14)*(F-1);g.$Cv(g.$Ri,I),A=Math.max(A,I+g.$Ck)}for(var z=0; z<p.$f1; z++){var Y=p.$Wb(z),X=h.indexOf(Y),P=0,U=new $.C.OFB.$a;for(o=Y.$Dob(null); o.$Ti; o.$Cn()){u=o.$ej;D[h.indexOf(u.$f3)]>0&&(U.$m6(u),P++)}if(P>0){var Q=f.$m38(Y).$gk/(P+1),V=$.GF.$m11(U.$f1),J=$.GF.$m11(U.$f1);for(c=0; c<U.$f1; c++){V[c]=h.indexOf(U.$Wb(c).$f3)-X,V[c]>0&&(V[c]-=2*h.$f1),J[c]=Q;for(K=0; K<c; K++)V[c]>V[K]?J[K]+=Q:J[c]+=Q}for(c=0; c<U.$f1; c++){var $$;u=U.$Wb(c);($$=f.$m37(u)).$oo(),$$.$Ql=new $.C.LGB.$b(0,0);var f$=f.$m38(Y),n$=f.$m38(u.$f3),i$=this.$f.$f19.$fc(u)?f$.$gk/2:J[c],t$=n$.$Si+n$.$Ck/2;$$.$Pl=new $.C.LGB.$b(i$-f$.$gk/2,0),$$.$Su(f$.$Ri+i$,t$)}}}var r$=(b=this.$f.$f8.$No(p.$Wb(0))).top,l$=b.bottom;null!==b&&0===this.$f.$f7?r$=A-Z:null!==b&&1===this.$f.$f7&&(l$=Z-A),this.$f.$f8.$qu(p.$Wb(0),new $.C.CGB(r$,b.left,l$,b.right))}},$f:null,$static:{T:new h(function(){return{$final:!0,$with:[$.C.XIB],constructor:function($, f, n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$Th!":function(f, n){var i=$.T.XHB.$m(this.$f.$To(f),this.$f.$To(n));return 0!==i?i:$.T.XHB.$m(this.$f2.$To(f),this.$f2.$To(n))},$f1:null}}),T1:new h(function(){return{$final:!0,$with:[$.C.XIB],constructor:function($, f){this.$f1=$,this.$f=f},$f:null,"$Th!":function(f, n){return $.T.XHB.$i(this.$f.$whb(f),this.$f.$whb(n))},$f1:null}})}}}),$clinit:function(){$.T.ZAD.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.ABD.$class,$.C.ZAD.$class,p[3],p[4])}}}})}),m("_$$_hbb",function($){$._$_xjo=new C(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),m("_$$_hbb",function($){$._$_yjo=new C(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;